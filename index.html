
<!DOCTYPE html>
<html lang="en" style="height: 100%;">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>List</title>

    <!-- Theme style -->
    <link rel="stylesheet" href="adminlte.min.css">
    <link rel="stylesheet" href="fontawesome-free/css/all.min.css">
    <style>
.img-fill {
    width: 100%;
    height: auto;
}

.card-title {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    width: 100%;
}

.sub-title {
    max-width:77%;
    white-space:nowrap;
    overflow:hidden;
}

.badge-lime {
  color: #1f2d3d;
  background-color: #01ff70;
}
.badge-fuchsia {
  color: #fff;
  background-color: #f012be;
}
.badge-indigo {
  color: #fff;
  background-color: #6610f2;
}
.badge-orange {
  color: #fff;
  background-color: #fd7e14;
}
.badge-olive {
  color: #fff;
  background-color: #001f3f;
}
.badge-cyan-400 {
  color: #1f2d3d;
  background-color: #3dd5f3;
}
.badge-purple-300 {
  color: #1f2d3d;
  background-color: #c5b3e6;
}
    </style>
</head>
<body class="hold-transition sidebar-mini iframe-mode" style="height: 100%;">
<div class="wrapper" style="height:100%">
    <!-- Content Wrapper. Contains page content -->
    <div class="content-wrapper">
        <!-- Content Header (Page header) -->
        <div class="content-header">
            <div class="container-fluid">
                <div class="row mb-2">
                    <div class="col-sm-2">
                        <h1 class="m-0">List</h1>
                    </div><!-- /.col -->
                    <div class="col-sm-2">
                        <div class="input-group mb-3">
                            <div class="input-group-prepend">
                                <span class="input-group-text"> <i class="fas fa-calendar"></i> </span>
                            </div>
                            <select id="_f" class="form-control">
                                <option value="data.20251209162915.js">2025-12-09 16:29:15</option>
                                <option value="data.20251205174128.js">2025-12-05 17:41:28</option>
                                <option value="data.20251126155932.js">2025-11-26 15:59:32</option>
                                <option value="data.20251110142158.js">2025-11-10 14:21:58</option>
                                <option value="data.20251107172243.js">2025-11-07 17:22:43</option>
                                <option value="data.20251105141301.js">2025-11-05 14:13:01</option>
                                <option value="data.20251103151426.js">2025-11-03 15:14:26</option>
                                <option value="data.20251031165448.js">2025-10-31 16:54:48</option>
                                <option value="data.20251028150719.js">2025-10-28 15:07:19</option>
                                <option value="data.20251024112142.js">2025-10-24 11:21:42</option>
                                <option value="data.20251016181049.js">2025-10-16 18:10:49</option>
                                <option value="data.20251015163201.js">2025-10-15 16:32:01</option>
                                <option value="data.20251013120428.js">2025-10-13 12:04:28</option>
                                <option value="data.20251011145327.js">2025-10-11 14:53:27</option>
                                <option value="data.20251009113625.js">2025-10-09 11:36:25</option>
                                <option value="data.20250925120244.js">2025-09-25 12:02:44</option>
                                <option value="data.20250922112444.js">2025-09-22 11:24:44</option>
                                <option value="data.20250918170728.js">2025-09-18 17:07:28</option>
                                <option value="data.20250915183114.js">2025-09-15 18:31:14</option>
                                <option value="data.20250909163717.js">2025-09-09 16:37:17</option>
                                <option value="data.20250904165809.js">2025-09-04 16:58:09</option>
                                <option value="data.20250901153412.js">2025-09-01 15:34:12</option>
                                <option value="data.20250825173555.js">2025-08-25 17:35:55</option>
                                <option value="data.20250820175515.js">2025-08-20 17:55:15</option>
                                <option value="data.20250804173232.js">2025-08-04 17:32:32</option>
                                <option value="data.20250729171939.js">2025-07-29 17:19:39</option>
                                <option value="data.20250721170727.js">2025-07-21 17:07:27</option>
                                <option value="data.20250624111338.js">2025-06-24 11:13:38</option>
                                <option value="data.20250507134503.js">2025-05-07 13:45:03</option>
                                <option value="data.20250228193612.js">2025-02-28 19:36:12</option>
                            </select>
                        </div>
                    </div><!-- /.col -->
                    <div class="col-sm-2">
                        <div class="input-group mb-3">
                            <div class="input-group-prepend">
                                <span class="input-group-text"> <i class="fas fa-sort"></i> </span>
                            </div>
                            <select id="_o" class="form-control">
                                <option value="ccu">CCU</option>
                                <option value="ct">Created</option>
                                <option value="both">CCU & Created</option>
                            </select>
                        </div>
                    </div><!-- /.col -->
                    <div class="col-sm-2">
                        <div class="input-group mb-3">
                            <div class="input-group-prepend">
                                <span class="input-group-text"> <i class="fas fa-search"></i> </span>
                            </div>
                            <input id="_s" type="text" class="form-control" placeholder="Search words">
                        </div>
                    </div><!-- /.col -->
                    <div class="col-sm-4">
                        <ol class="breadcrumb float-sm-right">
                            <li class="breadcrumb-item"><a href="#">Home</a></li>
                            <li class="breadcrumb-item active">List</li>
                        </ol>
                    </div><!-- /.col -->
                </div><!-- /.row -->
                <div class="row ml-2" id="_nav">
                </div>
                <div class="row ml-2" id="_words">
                </div>
            </div><!-- /.container-fluid -->
        </div>
        <!-- /.content-header -->

        <!-- Main content -->
        <div class="content">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-12">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- jQuery -->
<script src="jquery.min.js"></script>
<!-- Bootstrap 4 -->
<script src="bootstrap.bundle.min.js"></script>
<!-- AdminLTE App -->
<script src="adminlte.js"></script>
<script type='text/javascript'>
    //window.location.hash = ""
    var f,o
    var u = new URLSearchParams(location.search)
    if(u.get("f")) {
        f = u.get("f")
        $("#_f option[value='"+f+"']").attr("selected", "selected")
    } else {
        f = $("#_f option:selected").val()
    }
    if(u.get("o")) {
        o = u.get("o")
        $("#_o option[value='"+o+"']").attr("selected", "selected")
    } else {
        o = $("#_o option:selected").val()
    }
    document.write('<script src="'+f+'"></sc' + 'ript>')
    $("#_f").one("change", function() {
        var _u = new URLSearchParams(location.search)
        _u.set("f",$(this).val())
        location.href="index.html?" + _u.toString()
    })
    $("#_o").one("change", function() {
        var _u = new URLSearchParams(location.search)
        _u.set("o",$(this).val())
        location.href="index.html?" + _u.toString()
    })
</script>
<script type='text/javascript'>
    var _rows = rows
    _rows.forEach(item => item.created=new Date(item.createTime));
    _rows.sort((a, b) => b.playing - a.playing)
    _rows.forEach((item, index) => item.no1=index);
    _rows.sort((a, b) => b.created - a.created)
    _rows.forEach((item, index) => item.no2=index);
    var iv
    $("#_s").on("keyup", function() {
        var text = $(this).val().toLowerCase()
        if(iv) {
            clearTimeout(iv)
        }
        iv = setTimeout(function() {
            //window.location.hash = text
            _rows = rows.filter((item) => item.name.toLowerCase().indexOf(text)>-1 || item.formattedName.toLowerCase().indexOf(text)>-1);
            offset = 0;
            page_length = 0;
            pmap = new Map()
            $(".container-fluid .col-12").empty();
            load()
        }, 300)
    })
</script>
<script>
const cmap = {
    "Simulation": "danger",
    "Roleplay & Avatar Sim": "primary",
    "RPG": "success",
    "Survival": "warning",
    "Action": "info",
    "Adventure": "lime",
    "Sports & Racing": "fuchsia",
    "Shooter": "indigo",
    "Strategy": "orange",
    "Obby & Platformer": "olive",
    "Party & Casual": "cyan-400",
    "Social": "purple-300",
    "Shopping": "purple-300",
    "Entertainment": "purple-300",
    "Puzzle": "purple-300",
    "Education": "purple-300",
}
var pmap = new Map()
var offset = 0;
var page_length = 0;
var $ctn = $(".container-fluid .col-12");
$(document).ready(load);
function load() {
    if(page_length >= _rows.length) {
        return
    }
    let params = new URLSearchParams(location.search)
    var nav = params.get("nav")
    var nav2 = params.get("nav2")
    var f = params.get("f")
    var o = params.get("o")
    page_length += 300;
    if(o=="ct") {
        _rows.sort((a, b) => a.no2 - b.no2)
    } else if(o=="both") {
        _rows.sort((a, b) => (a.no1+a.no2) - (b.no1+b.no2))
    } else {
        _rows.sort((a, b) => a.no1 - b.no1)
    }
    if(nav != null) {
        _rows = _rows.filter(c => c.genreL1 == nav);
    }
    if(nav2 != null) {
        _rows = _rows.filter(c => c.genreL2 == nav2);
    }
    const c2map = new Set();
    for (; offset < page_length; offset += 6) {
        const $row = $('<div class="row mt-4"></div>');
        for (let i = 0; i < 6 && offset + i < Math.min(page_length, _rows.length); i++) {
            const item = _rows[offset + i];
            c2map.add(item.genreL2)
            if(!pmap.has(item.genreL1)) {
                pmap.set(item.genreL1, 0)
            }
            if(!pmap.has(item.genreL1 + "/" + item.genreL2)) {
                pmap.set(item.genreL1 + "/" + item.genreL2, 0)
            }
            pmap.set(item.genreL1, pmap.get(item.genreL1) + item.playing)
            pmap.set(item.genreL1 + "/" + item.genreL2, pmap.get(item.genreL1 + "/" + item.genreL2) + item.playing)
            const genreColor = cmap[item.genreL1];
            const cardHtml = `
                <div class="col-sm-2">
                    <div class="card card-success card-outline">
                       <div class="panel-heading">
                        <div class="card-header">
                            <h3 class="card-title text-primary"><a target="_blank" href="${item.robloxUrl}">${item.name}</a></h3><br>
                            <div>
                                <h6 class="small text-secondary">${item.formattedName}</h6>
                                <span class="float-left badge badge-${genreColor}">${item.genreL1}</span>
                                <span class="float-left">&nbsp;</span>
                                <span class="float-left badge badge-secondary">${item.genreL2}</span>
                                <br>
                                <span class="float-left small text-secondary">${item.createTime.substring(0,10)}</span>
                                <span class="float-right small text-bold">${item.playing.toLocaleString()}</span>
                            </div>
                        </div>
                        <div class="card-body">
                            <img src="${item.imageUrl}" class="img-fill">
                        </div>
                            </div>
                      </div>
                </div>`;
            $row.append(cardHtml);
        }
        $ctn.append($row);
    }
    // nav 1
    $("#_nav").empty()
    for (var k in cmap) {
        if(nav == null || k == nav) {
            $("#_nav").append('<a href="javascript:nav(\''+k+'\');" class="m-1 badge badge-'+cmap[k]+'">'+k+' ('+sum(pmap.get(k))+')</a>');
        }
    }
    if(nav != null) {
        $("#_nav").append('<a href="javascript:nav();" class="m-1 badge badge-secondary">x</a>');
    }
    // nav 2
    if(nav != null) {
        $("#_nav").append('<span class="mr-2 badge">&gt;&gt;</span>');
        c2map.forEach(function(j) {
            if(nav2 == null || j == nav2) {
                $("#_nav").append('<a href="javascript:nav(\''+nav+'\',\''+j+'\');" class="m-1 badge badge-secondary">'+(j=="" ? "(empty)" : j)+' ('+sum(pmap.get(nav+"/" + j))+')</a>')
            }
        })
        if(nav2 != null) {
            $("#_nav").append('<a href="javascript:nav(\''+nav+'\');" class="m-1 badge badge-secondary">x</a>');
        }
    }
    //word freq
    feq()
    offset = page_length;
    scrollLoad = true;
}
function nav(_nav,_nav2) {
    var _u = new URLSearchParams(location.search)
    if(_nav) {
        _u.set("nav",_nav)
        if(_nav2) {
            _u.set("nav2",_nav2)
        } else {
            _u.delete("nav2")
        }
    } else {
        _u.delete("nav")
        _u.delete("nav2")
    }
    location.href="index.html?" + _u.toString()
}
function feq() {
    var myMap = new Map()
    for (const _row of _rows) {
      var words = _row.formattedName.toLowerCase().split(" ")
      for(const element of words) {
          if(element.length<=1) {
            continue
          }
          if (myMap.has(element)) {
            myMap.set(element, myMap.get(element) + 1);
          } else {
            myMap.set(element, 1);
          }
      }
      myMap.delete("the")
      myMap.delete("in")
      myMap.delete("to")
      myMap.delete("and")
      myMap.delete("of")
      myMap.delete("game")
      myMap.delete("or")
      myMap.delete("my")
      myMap.delete("your")
      myMap.delete("for")
      myMap.delete("is")
      myMap.delete("with")
      myMap.delete("are")
      myMap.delete("on")
      myMap.delete("from")
      var arr = Array.from(myMap)
      arr.sort(function(a,b) {return b[1]-a[1]})
    }
    $("#_words").empty()
    arr = arr.slice(0,30)
    for (var k in arr) {
        $("#_words").append('<a href="#" class="m-1 badge badge-secondary _word">'+arr[k][0]+' ('+arr[k][1]+')</a>');
    }
    $("._word").click(function() {
        $('#_s').val($(this).text().split("(")[0])
        $('#_s').keyup();
    })
}
function sum(num) {
  if(num < 1000) {
    return "" + num
  } else if(num < 10000) {
    return (num / 1000).toFixed(2) + "k"
  } else if(num < 100000) {
    return (num / 1000).toFixed(1) + "k"
  } else if(num < 1000000) {
    return (num / 1000000).toFixed(2) + "m"
  } else if(num < 10000000) {
    return (num / 1000000).toFixed(1) + "m"
  } else {
    return (num / 1000000).toFixed(0) + "m"
  }
}
var scrollLoad = true;
$(window).scroll(function(){
 if (scrollLoad && ($(document).height() - $(window).height())-$(window).scrollTop()<=100){
    scrollLoad = false;
    load();
   }
});
</script>
</body>
</html>

